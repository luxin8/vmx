# 创建云主机

------------------------------------------------------------------------------------------

## 标题
创建伙伴云主机


## 底部操作栏
### 数量
* 默认为1，不可小于1，点击添加按钮添加1套，点击减少按钮减少1套，只支持输入数字，输入其他字符不显示。如当前数量为1则减1按钮置灰。输入0统一为1，输入超过上限的数量统一为上限，可用配额超过20时也最多只能输入20
* 数量上限：
  * 如当前配置下，一套主机也购买不了，则根据配额不足资源类型在数量上方持续显示错误提示【当前地域云主机数量已达上限】
  * 数量右侧增加问号提示，内容【该数量受云主机配额数限制，且不可超过20。】

### 时长
* 包年包月计费时显示，默认选中一个月，月份选项里，所选配置若有折扣，即显示折扣icon，移入右侧显示云主机产品的折扣信息。如“实例享6折”
* 如当前所选月份接口返回无折扣，说明客户未配置统一折扣，此情况下年付1-3年会有整体默认折扣，需要在月份选择右侧显示“年付更低”icon，每次切换月份都需要进行判断显示/隐藏。
* 点击月份选项时，展示全部可选（展示12个选项，1-9个月、1-3年），且展示顺序从下到上为1月~3年。

### 自动续费
* 包年包月计费时显示，默认不勾选，下方有虚横线，移入提示【账户金额充足时，将在到期前按购买时长自动续费。资源创建后，自动续费属性和时长均可修改。】

### 配置明细
* 具体展示配置项见原型，用户未选则相应配置时显示“–”。数据盘以“20GB * 1  40GB * 2”为样式分行显示


### 配置费用
*  显示云主机总价，包年包月显示单位为“/月”
*  以红色字体显示资源应付总价“¥XXX.XX”，如存在折扣导致的优惠，则右侧以绿色字体显示“省¥XX.XX”
*  价格查询未返回结果或接口报错时，底栏配置费用处显示“计算中”，其他价格线上处显示“--”，此时立即购买按钮置灰，移入提示“价格计算中”

### 页面跳转按钮
*  “立即购买”常亮可点击

## 页面校验整体说明
> 如校验项不符合且校验前已有错误提示，则直接定位至配置区域即可，不要重复显示错误提示，如已有错误提示项和校验项不一致，则同时显示多个错误提示
### 自定义创建/指定宿主机创建

| 校验项               | 触发校验条件   |不满足交互|
| ------------------- | -------------------|--------------| 
| 实名认证 | 页面加载 | 弹窗提示，“您尚未完成实名认证，认证后才可购买”，点击【稍后认证】关闭弹窗；点击【前往认证】，新开页面至[实名认证页面](https://realname.jdcloud.com/account/verify)，同时【前往认证】变为已【完成认证】，点击再次进行校验
| 主机地域/可用区售罄<br>（地域售罄=地域下所有可用区都售罄）|页面加载|查询UC可用区状态获取主机可用区售卖情况，将全部AZ售罄的地域置灰，移入提示【该地域下云主机资源已全部售罄】；如AZ售罄但所在地域还有售卖的AZ则只将售罄AZ置灰，移入提示【该可用区下云主机资源已全部售罄】；<br>如当前所选地域为售罄地域则弹窗提示，【当前地域下云主机资源已全部售罄，建议更换地域购买】，点击【已知晓】关闭弹窗。如当前所选地域未售罄但可用区售罄，则弹窗提示，【当前可用区下云主机资源已全部售罄，建议更换可用区购买】，点击【已知晓】关闭弹窗。
| 主机配额不足<br>（不足购买一套主机）|页面加载|数量上方根据配额不足资源显示错误提示【当前地域云主机数量已达上限】。
| 镜像未选|点击立即购买|定位至选项，圈红
| 本地盘镜像超过系统盘允许上限|立即购买|定位至系统盘区域，下方显示错误提示【镜像系统盘容量超过允许上限xxGB，请更换镜像】
| 主机规格不可选（售罄或资源不足）|立即购买|定位至规格列表下方，规格状态同未选中且售罄时状态，下方显示错误提示【所选规格在当前可用区已售罄，请调整规格或尝试在其他可用区购买】
| 主机主机地域/可用区售罄|立即购买|如当前所选地域为售罄地域则弹窗提示，“当前地域下云主机资源已全部售罄，建议更换地域购买”，点击已知晓关闭弹窗。如当前所选地域未售罄但可用区售罄，则弹窗提示，“当前可用区下云主机资源已全部售罄，建议更换可用区购买”，点击已知晓关闭弹窗。|同左
| 登录方式选择自定义时，未填写密码|立即购买|定位至选项，圈红。

### 计费模式
* 选项：包年/包月 ，选项中显示“优惠”字样

### 地域
* 配置项名称右侧增加问号提示，提示内容为【地域指的是云主机所在的物理位置，每个地域都是一个独立的地理区域。地域及可用区详细介绍 >】
* 选项：中国-香港-12 
* 地域选项下方默认显示提示【不同地域资源之间内网不互通，资源创建后不可更改地域属性。为降低网络时延，请根据业务覆盖地域就近选择。】
* （主机地域售罄校验）页面加载时，查询当前用户在可见地域和可用区下主机的售卖状态，将全部AZ售罄的地域置灰，移入提示【该地域下云主机资源已全部售罄】；如当前所选地域为售罄地域则弹窗提示，“当前地域下云主机资源已全部售罄，建议更换地域购买”，点击已知晓关闭弹窗。
  
    
### 可用区
* 配置项名称右侧增加问号提示，提示内容为【可用区是电力及网络之间互相独立的地理区域。同地域内不同可用区之间提供内网互通环境，相同可用区内的实例之间网络延时更小；可用区之间可做到故障隔离。地域及可用区详细介绍 >】

### CPU
* 支持选择1核、2核、4核、8核、16核，默认选中第一个可售规格
* 如该AZ下该CPU对应所有规格均已售罄，该CPU置灰不可选，且展示售罄icon，鼠标hover提示“当前可用区该CPU对应所有规格均已售罄”；
* 如全部规格均售罄，则不选中任何规格

### 内存
* 与所选CPU联动，默认选项第一个可售规格
* 如该AZ下所选CPU对应部分规格售罄，该内存置灰不可选，且展示售罄icon，鼠标hover提示“当前可用区该规格已售罄”；

### 镜像
* 镜像选择下拉
    * 两级下拉框，不支持搜索，分别筛选操作系统及系统版本，选择提示为“请选择操作系统”，“请选择系统版本”。
    * 操作系统版本选项为接口返回的镜像名称（版本应为从新到旧）
    * 系统版本下拉选项中，单行显示名称和id，格式为“ xxx | ID：img-xxx”
### 登录方式
 * 设置密码：自定义 | 自动生成
    * 密码/确认密码：设置密码选择自定义时显示，若选择自动生成，则隐藏输入框显示提示【系统将自动生成随机密码，并以短信和邮件发送给您。】
 * 密码模块交互
    * 点击/移入密码输入框后，右侧以popover形式显示实时校验提示，本框失去焦点时，隐藏（确认密码输入框无此校验）
    * 匹配项有三种状态，初始（未满足）、满足、冲突，未填写时均为初始状态，开始输入后随输入随校验，不同校验项状态如下
        * 长度8~30字符：未满足（长度范围外）、满足（长度范围内）
        * 至少包含数字和字母：未满足（未同时包含字母和数字）、满足（同时包含字母和数字）
            * 数字：0~9 
            * 小写字母：a~z
            * 大写字母：A~Z
        * 支持如下特殊字符：_ ( ) ` ~ ! @ # $ % ^ * - + = { } [ ] : ; , . ? /   
    * 文本框失焦时对输入进行校验
        * 密码输入框进行以下校验
            * 空：输入框圈红
            * 字符数在允许范围外：【密码长度须在8~30字符以内】
            * 未包含大写/小写字母、数字：【密码必须包含大/小写字母、数字】
            * 出现了不允许出现的字符或数字：【仅支持输入数字、大/小写字母及特殊字符_ ( ) ` ~ ! @ # $ % ^ * - + = { } [ ] : ; , . ? /  】
        * 确认密码输入框仅进行一致性校验，如与密码输入不一致，提示【两次输入的密码不一致】

### SSD系统盘
选中“免费赠送”，40GB，不可取消选中，右侧问题提示“免费赠送SSD磁盘40GB”

### SSD数据盘
* 默认添加一块数据盘，容量最小为10，且至少添加一块数据盘
* 可通过拖动或直接输入指定，范围10-1000GB，默认值为10；输入含个位数时向上取整，输入除数字外的其他字符不显示。输入小于10则统一为10，超过1000则统一为1000
* 磁盘可添加和删除：
     * 数据盘最多可添加5块，最少需添加1块
     * 数据盘添加块数=1时，“-”按钮置灰不可点击，鼠标hover提示“至少添加1块数据盘”；数据盘添加块数>1时，“-”按钮置灰可点击，点击后删除该数据盘
     * 始终显示按钮“+ 添加一块数据盘” 右侧有常显提示【一共可添加 X 块，还可添加 Y 块】
        

### 公网IP
勾选框：勾选项名称“随实例购买绑定”，默认勾选，置灰不可取消勾选。

### 线路
BGP

### 带宽上限
* 可通过拖动或直接输入指定，范围1-300Mbps，步长为1，默认值为1，仅可输入整数，输入小数向上取整，输入除数字外的其他字符反显原值。输入小于1则统一为1，超过300则统一为300；
### 防御峰值：
* 可通过拖动或直接输入指定，范围50-300G，步长为10，默认值为50，仅可输入10的倍数，输入个位数向上取整，输入除数字外的其他字符不显示。输入小于50则统一为50，超过300则统一为300；
* 文字提示“中国-香港-12节点 免费提供 50Gbps 的恶意流量攻击防护峰值”

### 名称
* 默认值为<日期>-<instance>，日期格式为YYYYMMDD；点击输入框时上方popover提示“1~128字符，可以包含中文、数字、大小写字母、英文下划线“_”、中划线“-”或点“.”，不能以“.”作为首尾。”，失焦后隐藏；
* 右侧有“如何设置有序名称？”提示，移入popover显示“批量创建多台云主机时，可在非首位位置添加[start_number]来设置有序名称。<br>start_number为起始序号，取值范围[0,9999]。例，批量创建名称为“jdc-vm-[01]”的主机，则主机名称依次为“jdc-vm-01”、“jdc-vm-02”... ...”
* 失焦时按以下校验项对用户输入名称进行校验，不符合在下方显示错误提示
  * 空：【名称不能为空】
  * 输入了[start_number]但是放在了首位，或添加了多个，或输入超出允许范围[0,9999] ：【仅支持添加一个[start_number]，范围[0,9999]，且不能出现在名称首位】
  * 出现非法字符：【只支持输入中文、数字、大小写字母、英文下划线“_”、中划线“-”或点“.”，不能以“.”作为首尾】

### 描述
 * 选填，默认为空，输入框内提示“选填”
 * 输入框内最右下角有字符输入提示，“x/256”，x为当前已输入字符数，支持UTF-8的全字符，长度不超过256字符。超过256字符输入不显示。
 
